// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.26.0
// source: url.sql

package dbQueries

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createStaticUrl = `-- name: CreateStaticUrl :exec
INSERT INTO static_urls (url_id, general_content, ios_content)
VALUES ($1, $2, $3)
`

type CreateStaticUrlParams struct {
	UrlID          int32       `json:"url_id"`
	GeneralContent string      `json:"general_content"`
	IosContent     pgtype.Text `json:"ios_content"`
}

func (q *Queries) CreateStaticUrl(ctx context.Context, arg CreateStaticUrlParams) error {
	_, err := q.db.Exec(ctx, createStaticUrl, arg.UrlID, arg.GeneralContent, arg.IosContent)
	return err
}

const createUrl = `-- name: CreateUrl :one
INSERT INTO urls (created_by, slug, general_redirect_path, ios_redirect_path, type)
VALUES ($1, $2, $3, $4, $5) RETURNING id
`

type CreateUrlParams struct {
	CreatedBy           pgtype.UUID   `json:"created_by"`
	Slug                string        `json:"slug"`
	GeneralRedirectPath string        `json:"general_redirect_path"`
	IosRedirectPath     pgtype.Text   `json:"ios_redirect_path"`
	Type                ValidUrlTypes `json:"type"`
}

func (q *Queries) CreateUrl(ctx context.Context, arg CreateUrlParams) (int32, error) {
	row := q.db.QueryRow(ctx, createUrl,
		arg.CreatedBy,
		arg.Slug,
		arg.GeneralRedirectPath,
		arg.IosRedirectPath,
		arg.Type,
	)
	var id int32
	err := row.Scan(&id)
	return id, err
}

const deleteStaticUrlByOwnerID = `-- name: DeleteStaticUrlByOwnerID :exec
DELETE FROM static_urls
WHERE url_id = $1
`

func (q *Queries) DeleteStaticUrlByOwnerID(ctx context.Context, urlID int32) error {
	_, err := q.db.Exec(ctx, deleteStaticUrlByOwnerID, urlID)
	return err
}

const deleteUrlByID = `-- name: DeleteUrlByID :exec
DELETE
FROM urls
WHERE id = $1
`

func (q *Queries) DeleteUrlByID(ctx context.Context, id int32) error {
	_, err := q.db.Exec(ctx, deleteUrlByID, id)
	return err
}

const getStaticUrlGeneralContent = `-- name: GetStaticUrlGeneralContent :one
SELECT general_content
FROM static_urls
WHERE url_id = (SELECT id FROM urls WHERE slug = $1)
`

func (q *Queries) GetStaticUrlGeneralContent(ctx context.Context, slug string) (string, error) {
	row := q.db.QueryRow(ctx, getStaticUrlGeneralContent, slug)
	var general_content string
	err := row.Scan(&general_content)
	return general_content, err
}

const getStaticUrlIOSContent = `-- name: GetStaticUrlIOSContent :one
SELECT general_content
FROM static_urls
WHERE url_id = (SELECT id FROM urls WHERE slug = $1)
`

func (q *Queries) GetStaticUrlIOSContent(ctx context.Context, slug string) (string, error) {
	row := q.db.QueryRow(ctx, getStaticUrlIOSContent, slug)
	var general_content string
	err := row.Scan(&general_content)
	return general_content, err
}

const getUrlById = `-- name: GetUrlById :one
SELECT id, slug, general_redirect_path, ios_redirect_path, created_at,created_by,type
FROM urls
WHERE id = $1
`

type GetUrlByIdRow struct {
	ID                  int32         `json:"id"`
	Slug                string        `json:"slug"`
	GeneralRedirectPath string        `json:"general_redirect_path"`
	IosRedirectPath     pgtype.Text   `json:"ios_redirect_path"`
	CreatedAt           pgtype.Date   `json:"created_at"`
	CreatedBy           pgtype.UUID   `json:"created_by"`
	Type                ValidUrlTypes `json:"type"`
}

func (q *Queries) GetUrlById(ctx context.Context, id int32) (GetUrlByIdRow, error) {
	row := q.db.QueryRow(ctx, getUrlById, id)
	var i GetUrlByIdRow
	err := row.Scan(
		&i.ID,
		&i.Slug,
		&i.GeneralRedirectPath,
		&i.IosRedirectPath,
		&i.CreatedAt,
		&i.CreatedBy,
		&i.Type,
	)
	return i, err
}

const getUrlBySlug = `-- name: GetUrlBySlug :one
SELECT general_redirect_path, ios_redirect_path
FROM urls
WHERE slug = $1
`

type GetUrlBySlugRow struct {
	GeneralRedirectPath string      `json:"general_redirect_path"`
	IosRedirectPath     pgtype.Text `json:"ios_redirect_path"`
}

func (q *Queries) GetUrlBySlug(ctx context.Context, slug string) (GetUrlBySlugRow, error) {
	row := q.db.QueryRow(ctx, getUrlBySlug, slug)
	var i GetUrlBySlugRow
	err := row.Scan(&i.GeneralRedirectPath, &i.IosRedirectPath)
	return i, err
}

const getUrlsByUser = `-- name: GetUrlsByUser :many
SELECT id, slug, ios_redirect_path, general_redirect_path, created_at
FROM urls
WHERE created_by = $1
LIMIT $2
`

type GetUrlsByUserParams struct {
	CreatedBy pgtype.UUID `json:"created_by"`
	Limit     int32       `json:"limit"`
}

type GetUrlsByUserRow struct {
	ID                  int32       `json:"id"`
	Slug                string      `json:"slug"`
	IosRedirectPath     pgtype.Text `json:"ios_redirect_path"`
	GeneralRedirectPath string      `json:"general_redirect_path"`
	CreatedAt           pgtype.Date `json:"created_at"`
}

func (q *Queries) GetUrlsByUser(ctx context.Context, arg GetUrlsByUserParams) ([]GetUrlsByUserRow, error) {
	rows, err := q.db.Query(ctx, getUrlsByUser, arg.CreatedBy, arg.Limit)
	if err != nil {
		return nil, err
	}
	defer rows.Close()
	var items []GetUrlsByUserRow
	for rows.Next() {
		var i GetUrlsByUserRow
		if err := rows.Scan(
			&i.ID,
			&i.Slug,
			&i.IosRedirectPath,
			&i.GeneralRedirectPath,
			&i.CreatedAt,
		); err != nil {
			return nil, err
		}
		items = append(items, i)
	}
	if err := rows.Err(); err != nil {
		return nil, err
	}
	return items, nil
}

const updateStaticUrl = `-- name: UpdateStaticUrl :exec
UPDATE static_urls
SET general_content = $1 AND ios_content = $2
WHERE url_id = $3
`

type UpdateStaticUrlParams struct {
	GeneralContent string      `json:"general_content"`
	IosContent     pgtype.Text `json:"ios_content"`
	UrlID          int32       `json:"url_id"`
}

func (q *Queries) UpdateStaticUrl(ctx context.Context, arg UpdateStaticUrlParams) error {
	_, err := q.db.Exec(ctx, updateStaticUrl, arg.GeneralContent, arg.IosContent, arg.UrlID)
	return err
}

const updateUrl = `-- name: UpdateUrl :exec
UPDATE urls
SET updated_at            = NOW(),
    slug                  = COALESCE($1, slug),
    general_redirect_path = COALESCE($2, general_redirect_path),
    ios_redirect_path     = COALESCE($3, ios_redirect_path)
WHERE id = $4
`

type UpdateUrlParams struct {
	Slug                string      `json:"slug"`
	GeneralRedirectPath string      `json:"general_redirect_path"`
	IosRedirectPath     pgtype.Text `json:"ios_redirect_path"`
	ID                  int32       `json:"id"`
}

func (q *Queries) UpdateUrl(ctx context.Context, arg UpdateUrlParams) error {
	_, err := q.db.Exec(ctx, updateUrl,
		arg.Slug,
		arg.GeneralRedirectPath,
		arg.IosRedirectPath,
		arg.ID,
	)
	return err
}
